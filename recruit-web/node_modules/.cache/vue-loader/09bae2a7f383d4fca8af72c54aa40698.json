{"remainingRequest":"E:\\software-engineering\\Software-Engineering-Projects\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\software-engineering\\Software-Engineering-Projects\\admin\\src\\views\\modules\\friendly_links\\add-or-update.vue?vue&type=style&index=0&id=55c7ce7f&lang=scss&scoped=true&","dependencies":[{"path":"E:\\software-engineering\\Software-Engineering-Projects\\admin\\src\\views\\modules\\friendly_links\\add-or-update.vue","mtime":1717153220954},{"path":"E:\\software-engineering\\Software-Engineering-Projects\\admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":1717153212185},{"path":"E:\\software-engineering\\Software-Engineering-Projects\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1717153219740},{"path":"E:\\software-engineering\\Software-Engineering-Projects\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1717153216603},{"path":"E:\\software-engineering\\Software-Engineering-Projects\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1717153218749},{"path":"E:\\software-engineering\\Software-Engineering-Projects\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1717153210346},{"path":"E:\\software-engineering\\Software-Engineering-Projects\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1717153219739}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoud2ViaW5mby1pdGVtIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgcGFkZGluZzogMTBweDsKICAvL21hcmdpbjogMTBweCAwOwogIGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIC8vYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsKICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogIG1heC13aWR0aDogNzAwcHg7CiAgd2lkdGg6IDEwMCU7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQoKLmVkaXRvciB7CiAgaGVpZ2h0OiA1MDBweDsKfQo="},{"version":3,"sources":["add-or-update.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"add-or-update.vue","sourceRoot":"src/views/modules/friendly_links","sourcesContent":["<template>\n  <div>\n    <el-form\n        class=\"detail-form-content\"\n        ref=\"ruleForm\"\n        :model=\"ruleForm\"\n        :rules=\"rules\"\n        label-width=\"80px\"\n    >\n      <el-row>\n        <el-col :span=\"12\">\n          <el-form-item v-if=\"type!='info'\" label=\"网站名称\" prop=\"webname\">\n            <el-input\n                v-model=\"ruleForm.webname\"\n                placeholder=\"网站名称\"\n                clearable\n            ></el-input>\n          </el-form-item>\n          <div v-else>\n            <el-form-item v-if=\"ruleForm.webname\" label=\"网站名称\" prop=\"webname\" >\n              <el-input\n                  v-model=\"ruleForm.webname\"\n                  placeholder=\"网站名称\"\n                  readonly\n\n              ></el-input>\n            </el-form-item>\n          </div>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item v-if=\"type!='info'\" label=\"logo\" prop=\"logo\">\n            <file-upload\n                tip=\"点击上传logo\"\n                action=\"file/upload\"\n                :limit=\"3\"\n                :multiple=\"true\"\n                :fileUrls=\"ruleForm.logo ? ruleForm.logo : ''\"\n                @change=\"logoUploadChange\"\n            ></file-upload>\n          </el-form-item>\n          <div v-else style=\"width: 400px; height: 100px; overflow: hidden;\">\n            <el-form-item v-if=\"ruleForm.logo\" label=\"logo\" prop=\"logo\">\n              <div style=\"width: 200px; height: 100px;\">\n                <img\n                    v-bind:key=\"index\"\n                    v-for=\"(item, index) in ruleForm.logo.split(',')\"\n                    :src=\"item\"\n                    width=\"100%\"\n                    height=\"100%\"\n                    style=\"object-fit: contain; margin-right:20px;\"\n                >\n              </div>\n            </el-form-item>\n          </div>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item v-if=\"type!='info'\" label=\"网址\" prop=\"website\">\n            <el-input\n                v-model=\"ruleForm.website\"\n                placeholder=\"网址\"\n                clearable\n            ></el-input>\n          </el-form-item>\n          <div v-else>\n            <el-form-item v-if=\"ruleForm.website\" label=\"网址\" prop=\"website\">\n              <el-input\n                  v-model=\"ruleForm.website\"\n                  placeholder=\"网址\"\n                  readonly\n              ></el-input>\n            </el-form-item>\n          </div>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"24\">\n          <el-form-item v-if=\"type!='info'\" label=\"网站介绍\" prop=\"webinfo\" >\n            <editor\n                style=\"min-width: 200px; max-width: 600px;\"\n                v-model=\"ruleForm.webinfo\"\n                class=\"editor\"\n                action=\"file/upload\"\n            ></editor>\n          </el-form-item>\n          <div v-else>\n            <el-form-item v-if=\"ruleForm.webinfo\" label=\"网站介绍\" prop=\"webinfo\" >\n              <span class=\"webinfo-item\" v-html=\"ruleForm.webinfo\"></span>\n            </el-form-item>\n          </div>\n        </el-col>\n      </el-row>\n      <el-form-item>\n        <el-button v-if=\"type!='info'\" type=\"primary\" @click=\"onSubmit\">提交</el-button>\n        <el-button v-if=\"type!='info'\" @click=\"back\">取消</el-button>\n        <el-button v-if=\"type=='info'\" @click=\"back\">返回</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { isNumber, isIntNumer, isEmail, isMobile, isURL, checkIdCard } from \"@/utils/validate\";\n\nexport default {\n  data() {\n    const validateIdCard = (rule, value, callback) => {\n      if (!value) {\n        callback();\n      } else if (!checkIdCard(value)) {\n        callback(new Error(\"请输入正确的身份证号码\"));\n      } else {\n        callback();\n      }\n    };\n\n    const validateUrl = (rule, value, callback) => {\n      if (!value) {\n        callback();\n      } else if (!isURL(value)) {\n        callback(new Error(\"请输入正确的URL地址\"));\n      } else {\n        callback();\n      }\n    };\n\n    const validatePhone = (rule, value, callback) => {\n      if (!value) {\n        callback();\n      } else if (!isMobile(value)) {\n        callback(new Error(\"请输入正确的电话号码\"));\n      } else {\n        callback();\n      }\n    };\n\n    const validateEmail = (rule, value, callback) => {\n      if (!value) {\n        callback();\n      } else if (!isEmail(value)) {\n        callback(new Error(\"请输入正确的邮箱地址\"));\n      } else {\n        callback();\n      }\n    };\n\n    const validateNumber = (rule, value, callback) => {\n      if (!value) {\n        callback();\n      } else if (!isNumber(value)) {\n        callback(new Error(\"请输入数字\"));\n      } else {\n        callback();\n      }\n    };\n\n    const validateIntNumber = (rule, value, callback) => {\n      if (!value) {\n        callback();\n      } else if (!isIntNumer(value)) {\n        callback(new Error(\"请输入整数\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      id: '',\n      type: '',\n      ruleForm: {\n        webname: '',\n        logo: '',\n        website: '',\n        webinfo: '',\n      },\n      rules: {\n        webname: [],\n        logo: [],\n        website: [],\n        webinfo: [],\n      }\n    };\n  },\n  props: [\"parent\"],\n  computed: {},\n  methods: {\n    download(file) {\n      window.open(`${file}`);\n    },\n    init(id, type) {\n      if (id) {\n        this.id = id;\n        this.type = type;\n      }\n      if (this.type == 'info' || this.type == 'else') {\n        this.info(id);\n      } else if (this.type == 'cross') {\n        const obj = this.$storage.getObj('crossObj');\n        for (const o in obj) {\n          if (o == 'webname') {\n            this.ruleForm.webname = obj[o];\n            continue;\n          }\n          if (o == 'logo') {\n            this.ruleForm.logo = obj[o];\n            continue;\n          }\n          if (o == 'website') {\n            this.ruleForm.website = obj[o];\n            continue;\n          }\n          if (o == 'webinfo') {\n            this.ruleForm.webinfo = obj[o];\n            continue;\n          }\n        }\n      }\n    },\n    info(id) {\n      this.$http({\n        url: `friendly_links/info/${id}`,\n        method: \"get\"\n      }).then(({ data }) => {\n        if (data && data.code === 0) {\n          this.ruleForm = data.data;\n        } else {\n          this.$message.error(data.msg);\n        }\n      });\n    },\n    onSubmit() {\n      this.$refs[\"ruleForm\"].validate(valid => {\n        if (valid) {\n          this.$http({\n            url: `friendly_links/${!this.ruleForm.id ? \"save\" : \"update\"}`,\n            method: \"post\",\n            data: this.ruleForm\n          }).then(({ data }) => {\n            if (data && data.code === 0) {\n              this.$message({\n                message: \"操作成功\",\n                type: \"success\",\n                duration: 1500,\n                onClose: () => {\n                  this.parent.showFlag = true;\n                  this.parent.addOrUpdateFlag = false;\n                  this.parent.friendly_linksCrossAddOrUpdateFlag = false;\n                  this.parent.search();\n                }\n              });\n            } else {\n              this.$message.error(data.msg);\n            }\n          });\n        }\n      });\n    },\n    getUUID() {\n      return new Date().getTime();\n    },\n    back() {\n      this.parent.showFlag = true;\n      this.parent.addOrUpdateFlag = false;\n      this.parent.friendly_linksCrossAddOrUpdateFlag = false;\n    },\n    logoUploadChange(fileUrls) {\n      this.ruleForm.logo = fileUrls;\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.webinfo-item {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 10px;\n  //margin: 10px 0;\n  border: 1px solid #e0e0e0;\n  border-radius: 5px;\n  //background-color: #f9f9f9;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  max-width: 700px;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.editor {\n  height: 500px;\n}\n</style>\n"]}]}