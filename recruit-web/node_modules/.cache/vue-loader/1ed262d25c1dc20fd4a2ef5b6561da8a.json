{"remainingRequest":"E:\\software-engineering\\Software-Engineering-Projects\\recruit-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\software-engineering\\Software-Engineering-Projects\\recruit-web\\src\\views\\modules\\storeup\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\software-engineering\\Software-Engineering-Projects\\recruit-web\\src\\views\\modules\\storeup\\list.vue","mtime":1719319913549},{"path":"E:\\software-engineering\\Software-Engineering-Projects\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719319903982},{"path":"E:\\software-engineering\\Software-Engineering-Projects\\recruit-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1719319903185},{"path":"E:\\software-engineering\\Software-Engineering-Projects\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719319903982},{"path":"E:\\software-engineering\\Software-Engineering-Projects\\recruit-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1719319912490}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBZGRPclVwZGF0ZSBmcm9tICIuL2FkZC1vci11cGRhdGUiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hGb3JtOiB7CiAgICAgICAga2V5OiAiIgogICAgICB9LAogICAgICBkYXRhTGlzdDogW10sCiAgICAgIHBhZ2VJbmRleDogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbFBhZ2U6IDAsCiAgICAgIGRhdGFMaXN0TG9hZGluZzogZmFsc2UsCiAgICAgIGRhdGFMaXN0U2VsZWN0aW9uczogW10sCiAgICAgIHNob3dGbGFnOiB0cnVlLAogICAgICBhZGRPclVwZGF0ZUZsYWc6IGZhbHNlCiAgICB9OwogIH0sCiAgLy8g6ZKp5a2Q5Ye95pWw77yM5Yid5aeL5YyWCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgdGhpcy5nZXREYXRhTGlzdCgpOwogIH0sCiAgLy8g6Ziy5q2iaHRtbOazqOWFpeaUu+WHu++8jOWQjumdouWrjOm6u+eDpuayoeacieS9v+eUqAogIGZpbHRlcnM6IHsKICAgIGh0bWxmaWx0ZXIodmFsKSB7CiAgICAgIHJldHVybiB2YWwucmVwbGFjZSgvPFtePl0qPi9nLCAnJykucmVwbGFjZSgvdW5kZWZpbmVkL2csICcnKTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEFkZE9yVXBkYXRlLAogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpIHsKICAgIH0sCiAgICAvLyDmn6Xor6IKICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy5wYWdlSW5kZXggPSAxOwogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICB9LAogICAgLy8g6I635Y+W5pWw5o2uCiAgICBnZXREYXRhTGlzdCgpIHsKICAgICAgdGhpcy5kYXRhTGlzdExvYWRpbmcgPSB0cnVlOwogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIHBhZ2U6IHRoaXMucGFnZUluZGV4LAogICAgICAgIGxpbWl0OiB0aGlzLnBhZ2VTaXplLAogICAgICAgIHNvcnQ6ICdpZCcKICAgICAgfTsKICAgICAgaWYgKHRoaXMuc2VhcmNoRm9ybS5uYW1lICE9ICcnICYmIHRoaXMuc2VhcmNoRm9ybS5uYW1lICE9IHVuZGVmaW5lZCkgewogICAgICAgIHBhcmFtc1snbmFtZSddID0gJyUnICsgdGhpcy5zZWFyY2hGb3JtLm5hbWUgKyAnJSc7CiAgICAgIH0KICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgdXJsOiAic3RvcmV1cC9wYWdlIiwKICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgIH0pLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgdGhpcy5kYXRhTGlzdCA9IGRhdGEuZGF0YS5saXN0OwogICAgICAgICAgdGhpcy50b3RhbFBhZ2UgPSBkYXRhLmRhdGEudG90YWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSBbXTsKICAgICAgICAgIHRoaXMudG90YWxQYWdlID0gMDsKICAgICAgICB9CiAgICAgICAgdGhpcy5kYXRhTGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5q+P6aG15pWwCiAgICBzaXplQ2hhbmdlSGFuZGxlKHZhbCkgewogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOwogICAgICB0aGlzLnBhZ2VJbmRleCA9IDE7CiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgIH0sCiAgICAvLyDlvZPliY3pobUKICAgIGN1cnJlbnRDaGFuZ2VIYW5kbGUodmFsKSB7CiAgICAgIHRoaXMucGFnZUluZGV4ID0gdmFsOwogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICB9LAogICAgc2VsZWN0aW9uQ2hhbmdlSGFuZGxlcih2YWwpIHsKICAgICAgdGhpcy5kYXRhTGlzdFNlbGVjdGlvbnMgPSB2YWw7CiAgICB9LAogICAgYWRkT3JVcGRhdGVIYW5kbGVyKGlkLCB0eXBlKSB7CiAgICAgIHRoaXMuc2hvd0ZsYWcgPSBmYWxzZTsKICAgICAgdGhpcy5hZGRPclVwZGF0ZUZsYWcgPSB0cnVlOwogICAgICB0aGlzLmNyb3NzQWRkT3JVcGRhdGVGbGFnID0gZmFsc2U7CiAgICAgIGlmICh0eXBlICE9ICdpbmZvJykgewogICAgICAgIHR5cGUgPSAnZWxzZSc7CiAgICAgIH0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuYWRkT3JVcGRhdGUuaW5pdChpZCwgdHlwZSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOa1j+iniOWZqOaJk+W8gOaWh+S7tuWNs+S4i+i9vQogICAgZG93bmxvYWQoZmlsZSkgewogICAgICB3aW5kb3cub3BlbihgJHtmaWxlfWApOwogICAgfSwKICAgIC8vIOWIoOmZpOaTjeS9nAogICAgZGVsZXRlSGFuZGxlcihpZCkgewogICAgICBjb25zdCBpZHMgPSBpZAogICAgICAgICAgPyBbTnVtYmVyKGlkKV0KICAgICAgICAgIDogdGhpcy5kYXRhTGlzdFNlbGVjdGlvbnMubWFwKGl0ZW0gPT4gTnVtYmVyKGl0ZW0uaWQpKTsKICAgICAgdGhpcy4kY29uZmlybShg56Gu5a6a6L+b6KGMWyR7aWQgPyAi5Yig6ZmkIiA6ICLmibnph4/liKDpmaQifV3mk43kvZw/YCwgIuaPkOekuiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJGh0dHAoewogICAgICAgICAgdXJsOiAic3RvcmV1cC9kZWxldGUiLAogICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICBkYXRhOiBpZHMKICAgICAgICB9KS50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAi5pON5L2c5oiQ5YqfIiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAsCiAgICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5zZWFyY2goKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/modules/storeup","sourcesContent":["<!--收藏的列表页面-->\n<template>\n  <div class=\"main-content\">\n    <div v-if=\"showFlag\">\n      <el-form :inline=\"true\" :model=\"searchForm\" class=\"form-content\">\n        <el-form-item label=\"收藏名称\">\n          <el-input v-model=\"searchForm.name\" placeholder=\"收藏名称\" clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button class=\"custom-button\" @click=\"search()\">查询</el-button>\n          <el-button\n            v-if=\"isAuth('storeup','新增')\"\n            class=\"custom-button primary\"\n            @click=\"addOrUpdateHandler()\"\n          >新增</el-button>\n          <el-button\n            v-if=\"isAuth('storeup','删除')\"\n            :disabled=\"dataListSelections.length <= 0\"\n            class=\"custom-button danger\"\n            @click=\"deleteHandler()\"\n          >删除</el-button>\n        </el-form-item>\n      </el-form>\n      <div class=\"table-content\">\n        <el-table\n            v-if=\"isAuth('storeup','查看')\"\n            :data=\"dataList\"\n            border\n            v-loading=\"dataListLoading\"\n            @selection-change=\"selectionChangeHandler\"\n            style=\"width: 100%;\">\n            <el-table-column\n                type=\"selection\"\n                header-align=\"center\"\n                align=\"center\"\n                width=\"50\">\n            </el-table-column>\n            <el-table-column\n                prop=\"refid\"\n                header-align=\"center\"\n                align=\"center\"\n                sortable\n                label=\"收藏id\">\n                <template slot-scope=\"scope\">\n                  {{scope.row.refid}}\n                </template>\n            </el-table-column>\n            <el-table-column\n                prop=\"tablename\"\n                header-align=\"center\"\n                align=\"center\"\n                sortable\n                label=\"表名\">\n                <template slot-scope=\"scope\">\n                  {{scope.row.tablename}}\n                </template>\n            </el-table-column>\n            <el-table-column\n                prop=\"name\"\n                header-align=\"center\"\n                align=\"center\"\n                sortable\n                label=\"收藏名称\">\n                <template slot-scope=\"scope\">\n                  {{scope.row.name}}\n                </template>\n            </el-table-column>\n            <el-table-column prop=\"picture\"\n                header-align=\"center\"\n                align=\"center\"\n                width=\"200\"\n                label=\"收藏图片\">\n                <template slot-scope=\"scope\">\n                  <div v-if=\"scope.row.picture\">\n                    <img :src=\"scope.row.picture.split(',')[0]\" min-width=\"100\" height=\"100\">\n                  </div>\n                  <div v-else>无图片</div>\n                </template>\n            </el-table-column>\n            <el-table-column\n                header-align=\"center\"\n                align=\"center\"\n                label=\"操作\">\n                <!--三个按钮，查看、修改、删除-->\n                <template slot-scope=\"scope\">\n                  <el-button v-if=\"isAuth('storeup','查看')\" class=\"custom-button text\" icon=\"el-icon-edit\" size=\"small\" @click=\"addOrUpdateHandler(scope.row.id,'info')\">详情</el-button>\n                  <el-button v-if=\"isAuth('storeup','修改')\" class=\"custom-button text\" icon=\"el-icon-edit\" size=\"small\" @click=\"addOrUpdateHandler(scope.row.id)\">修改</el-button>\n                  <el-button v-if=\"isAuth('storeup','删除')\" class=\"custom-button text danger\" icon=\"el-icon-delete\" size=\"small\" @click=\"deleteHandler(scope.row.id)\">删除</el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n        <!--分页-->\n        <el-pagination\n          @size-change=\"sizeChangeHandle\"\n          @current-change=\"currentChangeHandle\"\n          :current-page=\"pageIndex\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          :page-size=\"pageSize\"\n          :total=\"totalPage\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          class=\"pagination-content\"\n        ></el-pagination>\n      </div>\n    </div>\n    <add-or-update v-if=\"addOrUpdateFlag\" :parent=\"this\" ref=\"addOrUpdate\"></add-or-update>\n  </div>\n</template>\n\n<script>\nimport AddOrUpdate from \"./add-or-update\";\n\nexport default {\n  data() {\n    return {\n      searchForm: {\n        key: \"\"\n      },\n      dataList: [],\n      pageIndex: 1,\n      pageSize: 10,\n      totalPage: 0,\n      dataListLoading: false,\n      dataListSelections: [],\n      showFlag: true,\n      addOrUpdateFlag: false\n    };\n  },\n  // 钩子函数，初始化\n  mounted() {\n    this.init();\n    this.getDataList();\n  },\n  // 防止html注入攻击，后面嫌麻烦没有使用\n  filters: {\n    htmlfilter(val) {\n      return val.replace(/<[^>]*>/g, '').replace(/undefined/g, '');\n    }\n  },\n  components: {\n    AddOrUpdate,\n  },\n  methods: {\n    init() {\n    },\n    // 查询\n    search() {\n      this.pageIndex = 1;\n      this.getDataList();\n    },\n    // 获取数据\n    getDataList() {\n      this.dataListLoading = true;\n      let params = {\n        page: this.pageIndex,\n        limit: this.pageSize,\n        sort: 'id'\n      };\n      if (this.searchForm.name != '' && this.searchForm.name != undefined) {\n        params['name'] = '%' + this.searchForm.name + '%';\n      }\n      this.$http({\n        url: \"storeup/page\",\n        method: \"get\",\n        params: params\n      }).then(({data}) => {\n        if (data && data.code === 0) {\n          this.dataList = data.data.list;\n          this.totalPage = data.data.total;\n        } else {\n          this.dataList = [];\n          this.totalPage = 0;\n        }\n        this.dataListLoading = false;\n      });\n    },\n    // 每页数\n    sizeChangeHandle(val) {\n      this.pageSize = val;\n      this.pageIndex = 1;\n      this.getDataList();\n    },\n    // 当前页\n    currentChangeHandle(val) {\n      this.pageIndex = val;\n      this.getDataList();\n    },\n    selectionChangeHandler(val) {\n      this.dataListSelections = val;\n    },\n    addOrUpdateHandler(id, type) {\n      this.showFlag = false;\n      this.addOrUpdateFlag = true;\n      this.crossAddOrUpdateFlag = false;\n      if (type != 'info') {\n        type = 'else';\n      }\n      this.$nextTick(() => {\n        this.$refs.addOrUpdate.init(id, type);\n      });\n    },\n    // 浏览器打开文件即下载\n    download(file) {\n      window.open(`${file}`);\n    },\n    // 删除操作\n    deleteHandler(id) {\n      const ids = id\n          ? [Number(id)]\n          : this.dataListSelections.map(item => Number(item.id));\n      this.$confirm(`确定进行[${id ? \"删除\" : \"批量删除\"}]操作?`, \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        this.$http({\n          url: \"storeup/delete\",\n          method: \"post\",\n          data: ids\n        }).then(({data}) => {\n          if (data && data.code === 0) {\n            this.$message({\n              message: \"操作成功\",\n              type: \"success\",\n              duration: 1500,\n              onClose: () => {\n                this.search();\n              }\n            });\n          } else {\n            this.$message.error(data.msg);\n          }\n        });\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.main-content {\n  background-image: url('../../../assets/img/shoucangbackground.png'); /*背景图片*/\n  background-size: cover;\n  background-position: center;\n  padding: 20px;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column; /*垂直布局*/\n  animation: fadeIn 1.5s ease-in-out; /*动画*/\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.el-form-item label {\n  color: #409eff;\n  font-weight: bold;\n}\n\n.custom-button {\n  border-radius: 20px;\n  padding: 8px 16px;\n  transition: background-color 0.3s, border-color 0.3s; /*过渡动画*/\n}\n\n.custom-button.primary {\n  background-color: #409eff;\n  border-color: #409eff;\n  color: #9af5eb;\n}\n\n.custom-button.danger {\n  background-color: #f56c6c;\n  border-color: #f56c6c;\n  color: #fff;\n}\n\n.custom-button:hover {\n  background-color: #66b1ff;\n  border-color: #66b1ff;\n}\n\n.custom-button.danger:hover {\n  background-color: #ec8d45;\n  border-color: #ff7878;\n}\n\n.custom-button.text {\n  color: #409eff;\n}\n\n.custom-button.text.danger {\n  color: #dcd498;\n}\n\n.el-table {\n  border-radius: 10px;\n  overflow: hidden;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n}\n\n.el-table th, .el-table td {\n  padding: 10px;\n  text-align: center;\n}\n\n.el-table th {\n  background-color: #f5f7fa;\n  color: #409eff;\n  font-weight: bold;\n}\n\n.el-table tr:nth-child(odd) {\n  background-color: #fafafa;\n}\n\n.el-table tr:nth-child(even) {\n  background-color: #f0f0f0;\n}\n\n.el-table tr:hover {\n  background-color: #e0f7ff;\n}\n\n.pagination-content {\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n}\n\n.pagination-content .el-pagination {\n  background-color: #fff;\n  border-radius: 20px;\n  padding: 10px 20px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n}\n</style>\n"]}]}