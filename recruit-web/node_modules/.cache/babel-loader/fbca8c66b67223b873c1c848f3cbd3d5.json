{"remainingRequest":"E:\\1\\Software-Engineering-Projects\\recruit-web\\node_modules\\babel-loader\\lib\\index.js!E:\\1\\Software-Engineering-Projects\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\1\\Software-Engineering-Projects\\recruit-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\1\\Software-Engineering-Projects\\recruit-web\\src\\components\\common\\FileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\1\\Software-Engineering-Projects\\recruit-web\\src\\components\\common\\FileUpload.vue","mtime":1717224114232},{"path":"E:\\1\\Software-Engineering-Projects\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1717224099637},{"path":"E:\\1\\Software-Engineering-Projects\\recruit-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1717224098465},{"path":"E:\\1\\Software-Engineering-Projects\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1717224099637},{"path":"E:\\1\\Software-Engineering-Projects\\recruit-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1717224112413}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHN0b3JhZ2UgZnJvbSAiQC91dGlscy9zdG9yYWdlIjsKaW1wb3J0IGJhc2UgZnJvbSAiQC91dGlscy9iYXNlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nSW1hZ2VVcmw6ICIiLAogICAgICBmaWxlTGlzdDogW10sCiAgICAgIGZpbGVVcmxMaXN0OiBbXSwKICAgICAgbXlIZWFkZXJzOiB7fQogICAgfTsKICB9LAogIHByb3BzOiBbInRpcCIsICJhY3Rpb24iLCAibGltaXQiLCAibXVsdGlwbGUiLCAiZmlsZVVybHMiXSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgICB0aGlzLm15SGVhZGVycyA9IHsKICAgICAgJ1Rva2VuJzogc3RvcmFnZS5nZXQoIlRva2VuIikKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgZmlsZVVybHM6IGZ1bmN0aW9uIGZpbGVVcmxzKHZhbCkgewogICAgICB0aGlzLmluaXQoKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBnZXRBY3Rpb25Vcmw6IGZ1bmN0aW9uIGdldEFjdGlvblVybCgpIHsKICAgICAgdmFyIHVybCA9ICIvIi5jb25jYXQodGhpcy4kYmFzZS5uYW1lLCAiLyIpICsgdGhpcy5hY3Rpb247IC8vY29uc29sZS5sb2coJ1VwbG9hZCBVUkw6JywgdXJsKTsKCiAgICAgIHJldHVybiB1cmw7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICBpZiAodGhpcy5maWxlVXJscykgewogICAgICAgIHRoaXMuZmlsZVVybExpc3QgPSB0aGlzLmZpbGVVcmxzLnNwbGl0KCIsIik7CiAgICAgICAgdmFyIGZpbGVBcnJheSA9IFtdOwogICAgICAgIHRoaXMuZmlsZVVybExpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIHZhciBmaWxlID0gewogICAgICAgICAgICBuYW1lOiBpbmRleCwKICAgICAgICAgICAgdXJsOiBpdGVtCiAgICAgICAgICB9OwogICAgICAgICAgZmlsZUFycmF5LnB1c2goZmlsZSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zZXRGaWxlTGlzdChmaWxlQXJyYXkpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBoYW5kbGVCZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB2YXIgaXNBbGxvd2VkVHlwZSA9IFsnaW1hZ2UvanBlZycsICdpbWFnZS9wbmcnLCAnYXBwbGljYXRpb24vcGRmJ10uaW5jbHVkZXMoZmlsZS50eXBlKTsKICAgICAgdmFyIGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKCiAgICAgIGlmICghaXNBbGxvd2VkVHlwZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOaWh+S7tuWPquiDveaYryBKUEcsIFBORyDmiJYgUERGIOagvOW8jyEnKTsKICAgICAgfQoKICAgICAgaWYgKCFpc0x0Mk0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDmlofku7blpKflsI/kuI3og73otoXov4cgMk1CIScpOwogICAgICB9CgogICAgICByZXR1cm4gaXNBbGxvd2VkVHlwZSAmJiBpc0x0Mk07CiAgICB9LAogICAgaGFuZGxlVXBsb2FkU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlVXBsb2FkU3VjY2VzcyhyZXMsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIC8vY29uc29sZS5sb2coJ1VwbG9hZCBTdWNjZXNzIFJlc3BvbnNlOicsIHJlcyk7CiAgICAgIGlmIChyZXMgJiYgcmVzLmNvZGUgPT09IDApIHsKICAgICAgICBmaWxlTGlzdFtmaWxlTGlzdC5sZW5ndGggLSAxXVsidXJsIl0gPSB0aGlzLiRiYXNlLnVybCArICJ1cGxvYWQvIiArIGZpbGUucmVzcG9uc2UuZmlsZTsKICAgICAgICB0aGlzLnNldEZpbGVMaXN0KGZpbGVMaXN0KTsKICAgICAgICB0aGlzLiRlbWl0KCJjaGFuZ2UiLCB0aGlzLmZpbGVVcmxMaXN0LmpvaW4oIiwiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVVwbG9hZEVycjogZnVuY3Rpb24gaGFuZGxlVXBsb2FkRXJyKCkgewogICAgICAvL2NvbnNvbGUuZXJyb3IoJ1VwbG9hZCBFcnJvcjonKTsKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH5Lu25LiK5Lyg5aSx6LSlIik7CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy5zZXRGaWxlTGlzdChmaWxlTGlzdCk7CiAgICAgIHRoaXMuJGVtaXQoImNoYW5nZSIsIHRoaXMuZmlsZVVybExpc3Quam9pbigiLCIpKTsKICAgIH0sCiAgICBoYW5kbGVVcGxvYWRQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZUV4Y2VlZDogZnVuY3Rpb24gaGFuZGxlRXhjZWVkKCkgewogICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIlx1NjcwMFx1NTkxQVx1NEUwQVx1NEYyMCAiLmNvbmNhdCh0aGlzLmxpbWl0LCAiIFx1NUYyMFx1NTZGRVx1NzI0NyIpKTsKICAgIH0sCiAgICBzZXRGaWxlTGlzdDogZnVuY3Rpb24gc2V0RmlsZUxpc3QoZmlsZUxpc3QpIHsKICAgICAgdmFyIGZpbGVBcnJheSA9IFtdOwogICAgICB2YXIgZmlsZVVybEFycmF5ID0gW107CiAgICAgIHZhciB0b2tlbiA9IHN0b3JhZ2UuZ2V0KCJ0b2tlbiIpOwogICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIHVybCA9IGl0ZW0udXJsLnNwbGl0KCI/IilbMF07CiAgICAgICAgdmFyIGZpbGUgPSB7CiAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgICB1cmw6IHVybCArICI/dG9rZW49IiArIHRva2VuCiAgICAgICAgfTsKICAgICAgICBmaWxlQXJyYXkucHVzaChmaWxlKTsKICAgICAgICBmaWxlVXJsQXJyYXkucHVzaCh1cmwpOwogICAgICB9KTsKICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVBcnJheTsKICAgICAgdGhpcy5maWxlVXJsTGlzdCA9IGZpbGVVcmxBcnJheTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["FileUpload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 上传文件组件 -->\r\n    <el-upload\r\n      ref=\"upload\"\r\n      :action=\"getActionUrl\"\r\n      list-type=\"picture-card\"\r\n      :multiple=\"multiple\"\r\n      :limit=\"limit\"\r\n      :headers=\"myHeaders\"\r\n      :file-list=\"fileList\"\r\n      :on-exceed=\"handleExceed\"\r\n      :on-preview=\"handleUploadPreview\"\r\n      :on-remove=\"handleRemove\"\r\n      :on-success=\"handleUploadSuccess\"\r\n      :on-error=\"handleUploadErr\"\r\n      :before-upload=\"handleBeforeUpload\"\r\n      accept=\".jpg,.jpeg,.png,.pdf\"\r\n    >\r\n      <i class=\"el-icon-plus\"></i>\r\n      <div slot=\"tip\" class=\"el-upload__tip\" style=\"color:#838fa1;\">{{ tip }}</div>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\" size=\"tiny\" append-to-body>\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport storage from \"@/utils/storage\";\r\nimport base from \"@/utils/base\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      dialogImageUrl: \"\",\r\n      fileList: [],\r\n      fileUrlList: [],\r\n      myHeaders: {}\r\n    };\r\n  },\r\n  props: [\"tip\", \"action\", \"limit\", \"multiple\", \"fileUrls\"],\r\n  mounted() {\r\n    this.init();\r\n    this.myHeaders = {\r\n      'Token': storage.get(\"Token\")\r\n    };\r\n  },\r\n  watch: {\r\n    fileUrls: function(val) {\r\n      this.init();\r\n    }\r\n  },\r\n  computed: {\r\n    getActionUrl() {\r\n      const url = `/${this.$base.name}/` + this.action;\r\n    //console.log('Upload URL:', url);\r\n    return url;\r\n    }\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (this.fileUrls) {\r\n        this.fileUrlList = this.fileUrls.split(\",\");\r\n        let fileArray = [];\r\n        this.fileUrlList.forEach((item, index) => {\r\n          let file = {\r\n            name: index,\r\n            url: item\r\n          };\r\n          fileArray.push(file);\r\n        });\r\n        this.setFileList(fileArray);\r\n      }\r\n    },\r\n    handleBeforeUpload(file) {\r\n      const isAllowedType = ['image/jpeg', 'image/png', 'application/pdf'].includes(file.type);\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isAllowedType) {\r\n        this.$message.error('上传文件只能是 JPG, PNG 或 PDF 格式!');\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传文件大小不能超过 2MB!');\r\n      }\r\n      return isAllowedType && isLt2M;\r\n    },\r\n    handleUploadSuccess(res, file, fileList) {\r\n      //console.log('Upload Success Response:', res);\r\n      if (res && res.code === 0) {\r\n        fileList[fileList.length - 1][\"url\"] = this.$base.url + \"upload/\" + file.response.file;\r\n        this.setFileList(fileList);\r\n        this.$emit(\"change\", this.fileUrlList.join(\",\"));\r\n      } else {\r\n        this.$message.error(res.msg);\r\n      }\r\n    },\r\n    handleUploadErr() {\r\n      //console.error('Upload Error:');\r\n      this.$message.error(\"文件上传失败\");\r\n    },\r\n    handleRemove(file, fileList) {\r\n      this.setFileList(fileList);\r\n      this.$emit(\"change\", this.fileUrlList.join(\",\"));\r\n    },\r\n    handleUploadPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    handleExceed() {\r\n      this.$message.warning(`最多上传 ${this.limit} 张图片`);\r\n    },\r\n    setFileList(fileList) {\r\n      let fileArray = [];\r\n      let fileUrlArray = [];\r\n      let token = storage.get(\"token\");\r\n      fileList.forEach((item) => {\r\n        let url = item.url.split(\"?\")[0];\r\n        let file = {\r\n          name: item.name,\r\n          url: url + \"?token=\" + token\r\n        };\r\n        fileArray.push(file);\r\n        fileUrlArray.push(url);\r\n      });\r\n      this.fileList = fileArray;\r\n      this.fileUrlList = fileUrlArray;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n"],"sourceRoot":"src/components/common"}]}