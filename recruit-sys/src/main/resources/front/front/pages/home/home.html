<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>首页</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap"
          rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="../../assetsimages/x-icon/agricul.png">
    <link rel="stylesheet" href="../../assets/css/relys/animate.css">
    <link rel="stylesheet" href="../../assets/css/relys/bootstrap.min.css">
    <link rel="stylesheet" href="../../assets/css/relys/all.min.css">
    <link rel="stylesheet" href="../../assets/css/relys/icofont.min.css">
    <link rel="stylesheet" href="../../assets/css/relys/lightcase.css">
    <link rel="stylesheet" href="../../assets/css/relys/swiper.min.css">
    <link rel="stylesheet" href="../../assets/css/relys/style.css">
    <style type="text/css">
        body {
            background: linear-gradient(to bottom, #e0ffff, #f7faf8);
            font-family: 'Roboto', sans-serif;
        }

        .banner {
            width: 80%; /* 设置宽度为页面的四分之三 */
            margin: 0 auto; /* 居中对齐 */
            border-radius: 15px;
        }

        .banner-slider {
            height: 600px;
            border-radius: 15px;
            overflow: hidden !important; /* 隐藏溢出内容 */
        }


        .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-content a {
            width: 100%;
        }

        .product-content a h5 {
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .product-thumb {
            width: 100%;
            height: 0;
            padding-top: 60%;
            position: relative;
        }

        .post-thumb {
            position: relative;
            height: 0;
            padding-top: 100%;
        }

        .product-thumb img, .post-thumb a img {
            width: 100%;
            position: absolute;
            top: 0;
            object-fit: cover;
            height: 100%;
        }

        /* 初始状态下隐藏箭头 */
        .swiper-button-prev,
        .swiper-button-next {
            opacity: 0;
            transition: opacity 0.3s;
        }

        /* 当鼠标悬停在banner-slider上时显示箭头 */
        .banner-slider:hover .swiper-button-prev,
        .banner-slider:hover .swiper-button-next {
            opacity: 1;
        }

        .btn-light-green {
            background-color: #B2DFDB; /* 浅绿色背景颜色 */
            color: white; /* 文字颜色 */
            border: none; /* 无边框 */
            padding: 10px 20px; /* 内边距 */
            text-align: center; /* 文本居中 */
            text-decoration: none; /* 无下划线 */
            display: inline-block; /* 内联块元素 */
            font-size: 16px; /* 字体大小 */
            margin: 10px 0; /* 外边距 */
            cursor: pointer; /* 鼠标指针 */
            border-radius: 5px; /* 圆角边框 */
            transition: background-color 0.3s ease; /* 背景颜色过渡效果 */
        }

        .btn-light-green:hover {
            background-color: #80CBC4; /* 浅绿色的深色背景颜色（悬停效果） */
        }

        .rounded-corners {
            border-radius: 15px; /* 调整圆角的半径，可以根据需要修改 */

        }

        .rounded-corners img {
            border-radius: 15px; /* 确保图片本身也有圆角 */
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .move-up {
            margin-top: -20px; /* 向上移动10px，可以根据需要调整 */
        }

        /*新闻列表*/
        .blog-section {
            padding-top: 60px; /* 设置顶部内边距 */
            padding-bottom: 60px; /* 设置底部内边距 */
        }

        .section-header h3 {
            font-size: 2rem; /* 设置标题字体大小 */
            margin-bottom: 10px; /* 设置标题底部外边距 */
        }

        .section-header p {
            font-size: 1rem; /* 设置描述字体大小 */
            color: #6c757d; /* 设置描述文字颜色 */
        }

        .post-item1 {
            background-color: #fff; /* 设置新闻项背景颜色 */
            border-radius: 10px; /* 设置边框圆角 */
            overflow: hidden; /* 隐藏溢出内容 */
            transition: transform 0.3s ease, box-shadow 0.3s ease; /* 设置变换和阴影的过渡效果 */
            display: flex; /* 设置为弹性布局，使内容水平排列 */
            align-items: center; /* 垂直居中对齐 */
        }

        .post-item1:hover {
            transform: translateY(-5px); /* 鼠标悬停时向上移动 */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); /* 鼠标悬停时添加阴影 */
        }

        .post-thumb1 {
            width: 150px; /* 设置缩略图宽度 */
            height: 120px; /* 设置缩略图高度 */
            border-radius: 10px; /* 设置边框圆角 */

        }

        .post-thumb1 img {
            width: 100%; /* 设置图片宽度为容器宽度 */
            height: 100%; /* 设置图片高度为容器高度 */
            object-fit: cover; /* 保持图片比例并填满容器 */
        }

        .post-content {
            padding-left: 15px; /* 设置左内边距 */
            display: flex; /* 设置为弹性布局 */
            flex-direction: column; /* 垂直排列子元素 */
            justify-content: space-between; /* 在主轴上均匀分布子元素 */
        }

        .post-title {
            font-size: 1.25rem; /* 设置标题字体大小 */
            color: #3d3737; /* 设置标题颜色 */
            margin: 0 0 10px; /* 设置标题底部外边距 */
        }

        .read-more1 {
            font-size: 0.875rem; /* 设置“阅读更多”链接字体大小 */
            text-decoration: none; /* 移除文本装饰 */
        }

        .read-more1:hover {
            text-decoration: underline; /* 鼠标悬停时添加下划线 */
        }

    </style>
</head>
<body>
<div id="app">
    <!-- Banner Section Start Here -->
    <section class="banner banner-2" v-if="banners.length > 0">
        <div class="banner-slider">
            <div class="swiper-wrapper">
                <div class="swiper-slide" v-for="item in banners">
                    <div class="banner-item">
                        <div class="banner-inner">
                            <div class="banner-thumb">
                                <img :src="item.value" alt="banner-slider">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
            <div class="banner-pagination"></div>
        </div>
    </section>
    <!-- Banner Section Ending Here -->
    <!-- product section start here -->
    <section class="product-section product-style2 padding-tb" style="padding-bottom: 0;">
        <div class="container">
            <div class="section-header">
                <h3>招聘信息</h3>
            </div>
            <div class="section-wrapper">
                <div class="row">
                    <div class="col-lg-3 col-md-6 col-12" v-for="(item, i) in employmentlist">
                        <div class="product-item-2">
                            <div class="product-inner rounded-corners">
                                <div class="product-thumb rounded-corners" v-if="item.picture">
                                    <img :src="item.picture.split(',')[0]" alt="product" class="rounded-corners">
                                </div>
                                <div class="product-content">
                                    <a :href="`javascript: onPageTap('../employment/detail.html?id=${item.id}')`">
                                        <h5>{{item.position}}</h5>
                                    </a>
                                    <div class="cart-option move-up">
                                        <a :href="`javascript: onPageTap('../employment/detail.html?id=${item.id}')`"
                                           class="lab-btn btn-light-green"><span>查看详情</span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <a href="javascript: onPageTap('../employment/list.html')" class="lab-btn btn-light-green"><span>查看更多</span></a>
                </div>
            </div>
        </div>
    </section>
    <!--    新闻-->
    <section class="blog-section padding-tb">
        <div class="container">
            <div class="section-header text-center">
                <h3>招聘新闻一览</h3>
                <p>Employment and News</p>
            </div>
            <div class="section-wrapper">
                <div class="row justify-content-center">
                    <div class="col-12" v-for="(item, i) in news" :key="i">
                        <div class="post-item1 shadow-sm mb-4 d-flex">
                            <div class="post-thumb1">
                                <a :href="`../news/news-detail.html?id=${item.id}&tablename=news`">
                                    <img :src="item.picture" alt="news image" class="img-fluid rounded-corners"/>
                                </a>
                            </div>
                            <div class="post-content flex-grow-1 pl-3">
                                <a :href="`../news/news-detail.html?id=${item.id}&tablename=news`">
                                    <h5 class="post-title">{{item.title}}</h5>
                                </a>
                                <div class="text-btn mt-2">
                                    <a class="read-more1"
                                       :href="`../news/news-detail.html?id=${item.id}&tablename=news`">阅读更多</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="product-section product-style2 padding-tb" style="padding-bottom: 0;" v-if="isCompanyInfoUser">
        <div class="container">
            <div class="section-header">
                <h3>求职者信息</h3>
            </div>
            <div class="section-wrapper">
                <div class="row">
                    <div class="col-lg-3 col-md-6 col-12" v-for="(item, i) in jobseekerinfoList">
                        <div class="product-item-2">
                            <div class="product-inner">
                                <div class="product-thumb" v-if="item.photo">
                                    <img :src="item.photo.split(',')[0]" alt="product">
                                </div>
                                <div class="product-content">
                                    <a :href="`javascript: onPageTap('../jobseekerinfo/detail.html?id=${item.id}')`">
                                        <h5>{{item.fullname}}</h5>
                                    </a>
                                    <div class="cart-option move-up">
                                        <a :href="`javascript: onPageTap('../jobseekerinfo/detail.html?id=${item.id}')`"
                                           class="lab-btn btn-light-green"><span>查看详情</span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <a href="javascript: onPageTap('../jobseekerinfo/list.html')" class="lab-btn btn-light-green"><span>查看更多</span></a>
                </div>
            </div>
        </div>
    </section>
</div>
<script src="../../assets/js/relys/jquery.js"></script>
<script src="../../assets/js/relys/wow.min.js"></script>
<script src="../../assets/js/relys/swiper.min.js"></script>
<script src="../../assets/js/relys/fontawesome.min.js"></script>
<script src="../../assets/js/relys/bootstrap.min.js"></script>
<script src="../../assets/js/relys/vue.js"></script>
<script src="../../assets/js/api/api.js"></script>
<script src="../../assets/js/api/recommend.js"></script>
<script src="../../assets/js/api/tplist.js"></script>
<script src="../../assets/js/api/defaultuser.js"></script>
<div id="script"></div>
</body>
<script type="text/javascript">
    function onPageTap(url) {
        window.location.href = url;
    }

    var app = new Vue({
        el: "#app",
        data: {
            banners: [],
            employmentlist: [],
            jobseekerinfoList: [],
            news: [],
            isCompanyInfoUser: false,//是否是企业用户
            isGeneralUser: false,//是否是求职者用户
        },
        methods: {
            //点击跳转
            onPageTap(url) {
                window.location.href = url;
            }
        },
        created() {
            // 获取当前登录用户的角色
            var role = localStorage.getItem("sessionTable");
            // 检查角色是否为 "companyinfo"
            this.isCompanyInfoUser = (role === "companyinfo");
            // 检查角色是否为 "general"
            this.isGeneralUser = (role === "generaluser");
            // console.log("iscompany"+this.isCompanyInfoUser)
            // console.log("isuser"+this.isGeneralUser)
            // console.log("role"+role)
            tpPage("config", (res) => {
                this.banners = res.data.list
                if (this.banners.length == 0) {
                    this.banners.push({value: "../../assets/images/banner/01.jpg"})
                } else {
                    this.banners.forEach(item => {
                        if (!item.value) {
                            item.value = "../../assets/images/banner/01.jpg"
                        }
                    })
                }
                this.$nextTick(() => {
                    var swiper = new Swiper('.banner-slider', {
                        slidesPerView: 1,
                        autoplay: {
                            autoplay: true,
                            delay: 5000,
                            disableOnInteraction: false,
                        },
                        // 如果需要前进后退按钮
                        navigation: {
                            nextEl: '.swiper-button-next',
                            prevEl: '.swiper-button-prev',
                        },
                        pagination: {
                            el: '.banner-pagination',
                            clickable: true,
                        },
                        loop: true,
                    });
                })
            })
            tplist("news", 1, 100, false, false, (res) => {
                this.news = res.data.list
            })
            recommend('employment', false, (res) => {
                if (res.code == 0) {
                    this.employmentlist = res.data.list
                }
            })
            recommend('jobseekerinfo', false, (res) => {
                if (res.code == 0) {
                    this.jobseekerinfoList = res.data.list
                }
            })
            this.recommend = null
            this.recommend = null
            this.recommend = null
            this.recommend = null
            this.recommend = null
            this.recommend = null
            this.recommend = null
            this.recommend = null
        }
    })
</script>
</html>
