<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>列表</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap" rel="stylesheet">
	<link rel="shortcut icon" type="image/x-icon" href="../../assets/images/x-icon/agricul.png">
	<link rel="stylesheet" href="../../assets/css/relys/animate.css">
	<link rel="stylesheet" href="../../assets/css/relys/bootstrap.min.css">
	<link rel="stylesheet" href="../../assets/css/relys/all.min.css">
	<link rel="stylesheet" href="../../assets/css/relys/icofont.min.css">
	<link rel="stylesheet" href="../../assets/css/relys/lightcase.css">
	<link rel="stylesheet" href="../../assets/css/relys/swiper.min.css">
	<link rel="stylesheet" href="../../assets/css/relys/style.css">
	<style>
		.img-box {
			width: 100%;
			height: 100%;
			padding-top: 100%;
			position: relative;
			overflow: hidden;
		}

		.img-box img {
			width: 100%;
			position: absolute;
			top: 0;
			object-fit: contain;
			height: 100%;
			transition: transform 0.3s ease-in-out;
		}

		.img-box img:hover {
			transform: scale(1.2);
		}

		.link-item {
			background-color: #49def51d;
			display: flex;
			align-items: center;
			padding: 15px 0;
			margin: 15px 0;
			transition: background-color 0.3s, transform 0.3s;
		}
		.link-item a:hover {
			text-decoration: underline;
			color: #0056b3;
		}
		.description {
			color: #666;
			font-size: 0.9em;
			margin-top: 5px;
		}
		.link-item:hover {
			background-color: #49def546;
			transform: translateY(-2px);
		}

		.link-container img {
			width: 100px;
			height: 100px;
			object-fit: cover;
			border-radius: 10px;
			margin-right: 20px;
			transition: transform 0.3s;
		}

		.link-container img:hover {
			transform: scale(1.1);
		}
		.link-container a {
			text-decoration: none;
			color: #007BFF;
			font-weight: 600;
			font-size: 1.2em;
			transition: color 0.3s;
		}

		.link-container {
			display: flex;
			align-items: center;
		}

		.link-container div {
			flex: 1; /* 填充剩余空间 */
		}
	</style>
</head>
<body>
<div id="app">
	<section class="page-header bg_img padding-tb">
		<div class="overlay"></div>
		<div class="container">
			<div class="page-header-content-area">
				<h4 class="ph-title">友情链接列表</h4>
				<ul class="agri-ul">
					<li><a href="../../index.html">首页</a></li>
					<li><a class="active">友情链接列表</a></li>
				</ul>
			</div>
		</div>
	</section>
	<div class="shop-page padding-tb">
		<div class="container">
			<div class="row justify-content-center">
				<div :class="group ? 'col-lg-9 col-12' : 'col-lg-12 col-12'">
					<article>
						<div class="link-item" v-for="(item, i) in list" :key="item.id" @click="onPageTap(`./detail.html?id=${item.id}`)">
							<div class="link-container">
								<img :src="item.logo.split(',')[0]" alt="shop">
								<div>
									<a :href="`javascript: onPageTap('./detail.html?id=${item.id}')`">{{ item.webname }}</a>
								</div>
							</div>
						</div>
						<div class="paginations">
							<ul class="agri-ul d-flex flex-wrap justify-content-center" id="paginator"></ul>
						</div>
					</article>
				</div>
			</div>
		</div>
	</div>
</div>
<script src="../../assets/js/relys/jquery.js"></script>
<script src="../../assets/js/relys/fontawesome.min.js"></script>
<script src="../../assets/js/relys/bootstrap.min.js"></script>
<script src="../../assets/js/relys/vue.js"></script>
<script src="../../assets/js/api/api.js"></script>
<script src="../../assets/js/api/tplist.js"></script>
<script src="../../assets/js/relys/utils.js"></script>
<script src="../../assets/js/relys/jq-paginator.min.js"></script>
<div id="script"></div>
</body>
<script>
	var app = new Vue({
		el: "#app",
		data: {
			group: false,
			first: true,
			list: [],
			page: {
				page: 1,
				limit: 16,
				total: 0
			},
			webname: "",
			searchname: '',
			searchval: ''
		},
		methods: {
			//点击跳转
			onPageTap(url) {
				window.location.href = url;
			},
			//获取列表
			async getList(searchname, searchval) {
				return new Promise((resolve) => {
					goodsList('friendly_links', this.page.page, this.page.limit, searchname, searchval, (res) => {
						if (res.code == 0) {
							this.list = res.data.list;
							resolve(res.data);
						}
					});
				});
			},
			//分页
			pageFun(data) {
				var that = this;
				$('#paginator').jqPaginator({
					totalPages: data.totalPage,
					visiblePages: 7,
					currentPage: that.page.page,
					prev: '<li class="d-none d-sm-block"><a href="javascript: app.pageFun()">&lt;</a></li>',
					next: '<li class="d-none d-sm-block"><a href="javascript: app.pageFun()">&gt;</a></li>',
					page: `<li class="d-none d-sm-block"><a href="javascript: app.pageFun()">{{page}}</a></li>`,
					onPageChange: function (num, type) {
						that.page.page = num;
						that.getList(that.searchname, that.searchval);
					}
				});
			}
		},
		async created() {
			setTimeout(() => {
				var scripts = [
					'../../assets/js/relys/wow.min.js',
					'../../assets/js/relys/swiper.min.js',
					'../../assets/js/relys/jquery.countdown.min.js',
					'../../assets/js/relys/jquery.counterup.min.js',
					'../../assets/js/relys/isotope.pkgd.min.js',
					'../../assets/js/relys/lightcase.js',
					'../../assets/js/relys/functions.js'
				];
				scripts.forEach(ele => {
					var new_element = document.createElement("script");
					new_element.setAttribute("type", "text/javascript");
					new_element.setAttribute("src", ele);
					document.getElementById('script').appendChild(new_element);
				});
			}, 500);
			var search = getParam('search');
			var searchname = 'webname';

			if (search) {
				this.searchname = searchname;
				this.searchval = search;
			}
			var res = await this.getList(this.searchname, this.searchval);
			this.pageFun(res);
			this.group = true;
		}
	});
</script>
</html>
